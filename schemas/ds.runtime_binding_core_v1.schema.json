{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://mova.dev/schemas/ds.runtime_binding_core_v1.schema.json",
  "title": "ds.runtime_binding_core_v1",
  "description": "Core schema describing a neutral binding between MOVA scenarios/skills and an execution runtime, without vendor-specific details.",
  "allOf": [
    {
      "$ref": "https://mova.dev/schemas/ds.mova_schema_core_v1.schema.json"
    },
    {
      "type": "object",
      "properties": {
        "runtime_id": {
          "type": "string",
          "description": "Canonical id of the runtime environment, e.g. runtime_core:cloudflare_worker, runtime_core:local_process."
        },
        "runtime_kind": {
          "type": "string",
          "description": "High-level runtime kind.",
          "enum": [
            "serverless",
            "container",
            "local_process",
            "browser",
            "edge",
            "other"
          ]
        },
        "language": {
          "type": "string",
          "description": "Primary implementation language or platform, e.g. nodejs, python, wasm, browser-js."
        },
        "runtime_version": {
          "type": "string",
          "description": "Optional version of the runtime or platform."
        },
        "env_profile_id": {
          "type": "string",
          "description": "Optional environment profile id, e.g. dev, staging, prod."
        },
        "binding_targets": {
          "type": "array",
          "description": "Targets that are bound to this runtime.",
          "items": {
            "type": "object",
            "properties": {
              "target_kind": {
                "type": "string",
                "description": "What is being bound: template, scenario, skill, connector_proxy, service.",
                "enum": [
                  "template",
                  "scenario",
                  "skill",
                  "connector_proxy",
                  "service",
                  "other"
                ]
              },
              "target_id": {
                "type": "string",
                "description": "Identifier of the bound target (e.g. npm package name, scenario id, skill id)."
              }
            },
            "required": [
              "target_kind",
              "target_id"
            ],
            "additionalProperties": true
          }
        },
        "capabilities": {
          "type": "object",
          "description": "Capability flags for this runtime binding (network, storage, secrets, etc.). This is descriptive, not executable.",
          "properties": {
            "network": {
              "type": "string",
              "description": "Network access level, e.g. none, internal_only, internet_limited, internet_full."
            },
            "storage": {
              "type": "string",
              "description": "Storage capabilities, e.g. none, key_value, sql, object_store."
            },
            "secrets": {
              "type": "string",
              "description": "Secrets handling capabilities, e.g. none, env_only, managed_store."
            },
            "queues": {
              "type": "string",
              "description": "Queueing/message capabilities if any."
            }
          },
          "additionalProperties": true
        }
      },
      "required": [
        "runtime_id",
        "runtime_kind"
      ]
    }
  ]
}
